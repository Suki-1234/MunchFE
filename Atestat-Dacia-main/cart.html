<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MunchFE Cart</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; }
h1 { text-align:center; margin-bottom:30px; }
.cart-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; padding:10px; border-bottom:1px solid #ccc; }
.cart-item button { margin-left:5px; padding:5px 10px; border:none; border-radius:5px; background:#A1887F; color:#fff; cursor:pointer; }
.cart-total { text-align:right; font-weight:bold; margin-top:20px; }
</style>
</head>
<body>
<h1>Your Cart</h1>
<div id="cart-items"></div>
<div class="cart-total" id="cart-total"></div>
<button onclick="clearCart()">Clear Cart</button>
<div style="text-align:right; margin-top:20px;">
    <button id="checkout-button" style="padding:10px 20px; background:#6D4C41; color:#fff; border:none; border-radius:6px; cursor:pointer;">
        Proceed to Checkout
    </button>
</div>
<div style="text-align:right; margin-top:20px;">
    <button id="return-btn" style="padding:10px 20px; background:#A1887F; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold;">
        Return to Shop
    </button>
</div>


<script>
let cart = JSON.parse(localStorage.getItem('munchfeCart')) || [];

function displayCart() {
    const container = document.getElementById('cart-items');
    container.innerHTML = '';
    let total = 0;

    cart.forEach((item, index) => {
        total += item.price * item.quantity;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
            <span>${item.name}</span>
            <span>€${item.price.toFixed(2)}</span>
            <span>
                Qty: 
                <button onclick="decreaseQty(${index})">-</button>
                ${item.quantity}
                <button onclick="increaseQty(${index})">+</button>
            </span>
            <button onclick="removeItem(${index})">Remove</button>
        `;
        container.appendChild(div);
    });

    document.getElementById('cart-total').innerText = "Total: €" + total.toFixed(2);
    localStorage.setItem('munchfeCart', JSON.stringify(cart));}
    document.getElementById('return-btn').addEventListener('click', () => {
    // Redirect to the shop page
    window.location.href = 'shop.html';});
function increaseQty(i) { cart[i].quantity++; displayCart(); }
function decreaseQty(i) { 
    if(cart[i].quantity > 1) cart[i].quantity--; 
    else removeItem(i);
    displayCart(); 
}
function removeItem(i) { cart.splice(i,1); displayCart(); }
function clearCart() { cart = []; displayCart(); }

displayCart();
document.getElementById('checkout-button').addEventListener('click', () => {
    // If cart is empty, prevent redirect
    if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
    }

    // Save cart in localStorage (already done, just to be safe)
    localStorage.setItem('munchfeCart', JSON.stringify(cart));

    // Redirect to checkout page
    window.location.href = 'checkout.html';
});
</script>
</body>
</html>

